function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"7vJP":function(e,t,n){"use strict";n.r(t);var i,o=n("ofXK"),a=n("3Pt+"),c=n("tyNb"),r=n("R0Ic"),s=n("fXoL"),u=n("sYmb"),l=n("2Vo4"),b=n("lJxs"),p=n("tk/3"),m=((i=function(){function e(t,n){var i=this;_classCallCheck(this,e),this.http=t,this.translate=n,this.baseUrl="https://api.cucuit.com",this.cucus$=new l.a([]),this.fetchCucus(n.currentLang),this.translate.onLangChange.subscribe((function(e){return i.fetchCucus(e)}))}return _createClass(e,[{key:"fetchCucus",value:function(e){var t=this,n=new Date;n.setMinutes(n.getMinutes()-15),this.http.get("".concat(this.baseUrl,"/cucus/after/").concat(n.toUTCString())).subscribe((function(e){t.cucus$.next(e)}))}},{key:"createCucu",value:function(e){var t=this;return this.http.post("".concat(this.baseUrl,"/cucus"),e).pipe(Object(b.a)((function(e){return t.fetchCucus(t.translate.currentLang),e})))}},{key:"incrementClickCounter",value:function(e){return this.http.get("".concat(this.baseUrl,"/cucus/").concat(e,"/click"))}},{key:"uploadAvatar",value:function(e){var t=new FormData;return t.append("file",e),this.http.post("".concat(this.baseUrl,"/images"),t)}},{key:"getImageBaseUrl",value:function(){return"".concat(this.baseUrl,"/images")}},{key:"cucus",get:function(){return this.cucus$}}]),e}()).\u0275fac=function(e){return new(e||i)(s.ac(p.a),s.ac(u.c))},i.\u0275prov=s.Mb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),d=n("LRne"),h=n("JX91"),f=[{name:"Italiano \ud83c\uddee\ud83c\uddf9",short:"it",emoji:"\ud83c\uddee\ud83c\uddf9"},{name:"Espa\xf1ol \ud83c\uddea\ud83c\uddf8",short:"es",emoji:"\ud83c\uddea\ud83c\uddf8"},{name:"Deutsch \ud83c\udde9\ud83c\uddea",short:"de",emoji:"\ud83c\udde9\ud83c\uddea"},{name:"English \ud83c\uddec\ud83c\udde7",short:"en",emoji:"\ud83c\uddec\ud83c\udde7"}],g=n("aceb"),v=["element"];function y(e,t){1&e&&(s.Wb(0,"nb-card",27),s.Wb(1,"nb-card-body"),s.Wb(2,"b"),s.Wb(3,"a",28),s.Ac(4,"Hangouts"),s.Vb(),s.Vb(),s.Ac(5,": 10 participants"),s.Rb(6,"br"),s.Wb(7,"b"),s.Wb(8,"a",29),s.Ac(9,"Skype"),s.Vb(),s.Vb(),s.Ac(10,": 50 participants"),s.Rb(11,"br"),s.Wb(12,"b"),s.Wb(13,"a",30),s.Ac(14,"Jitsi Meet"),s.Vb(),s.Vb(),s.Ac(15,": 25 participants"),s.Rb(16,"br"),s.Wb(17,"b"),s.Wb(18,"a",31),s.Ac(19,"Zoom"),s.Vb(),s.Vb(),s.Ac(20,": 100 participants, max. 40 minutes"),s.Rb(21,"br"),s.Vb(),s.Vb())}function C(e,t){if(1&e&&(s.Wb(0,"nb-option",15),s.Ac(1),s.Vb()),2&e){var n=t.$implicit;s.mc("value",n.short),s.Eb(1),s.Bc(n.name)}}function W(e,t){if(1&e&&(s.Wb(0,"nb-option",15),s.Ac(1),s.Vb()),2&e){var n=t.$implicit;s.mc("value",n),s.Eb(1),s.Cc(" ",n," ")}}var V,S=((V=function(){function e(t,n,i,o){_classCallCheck(this,e),this.formBuilder=t,this.translate=n,this.dbService=i,this.toastrService=o,this.componentSize="medium",this.componentShape="rectangle",this.showCallProvidersInfoBox=!0,this.languages=f,this.timeSlots=[],this.avatarUploadLabel=""}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t=(new Date).getHours(),n=t>18?"Tomorrow":"Today",i=t>18?"10:00":"".concat(t+2,":00");this.timeSlots=this.getTimeSlots(n),this.form=this.formBuilder.group({inviteUrl:["",[a.m.required,k]],topic:["",a.m.required],userName:["",a.m.required],language:[this.translate.currentLang,a.m.required],day:[n,a.m.required],time:[i,a.m.required]}),this.filteredTimeOptions$=Object(d.a)(this.timeSlots),this.filteredTimeOptions$=this.time.valueChanges.pipe(Object(h.a)(""),Object(b.a)((function(t){return e.filterTimeslots(t)}))),this.day.valueChanges.subscribe((function(n){e.timeSlots=e.getTimeSlots(n),e.time.setValue("Tomorrow"===n?"10:00":"".concat(t+2,":00"))}))}},{key:"filterTimeslots",value:function(e){if(e){var t=e.toLowerCase();return this.timeSlots.filter((function(e){return e.toLowerCase().includes(t)}))}}},{key:"ngAfterViewInit",value:function(){var e=this;setTimeout((function(){e.element.nativeElement.blur(),e.time.markAsUntouched()}),1)}},{key:"postCucu",value:function(){var e=this;if(this.form.valid){var t=this.form.getRawValue(),n=new Date;"Tomorrow"===t.day&&(n=function(e){var t=new Date(e);return t.setDate(t.getDate()+1),t}(n),console.log(n));var i=t.time.split(":")[0],o=t.time.split(":")[1];n.setHours(i),n.setMinutes(o),n.setSeconds(0),console.log(n),this.avatarId||(this.avatarId=""),this.dbService.createCucu({inviteUrl:t.inviteUrl,topic:t.topic,startDate:n,userName:t.userName,avatarId:this.avatarId,language:t.language}).subscribe((function(t){t.topic?(e.avatarUploadLabel="",e.form.reset(),e.showToast("success")):(console.error(t),e.showToast("danger"))}))}else console.error("Form invalid"),console.error(this.form),console.log(this.form.getRawValue())}},{key:"onAvatarFileChanged",value:function(e){var t=this,n=e.target.files[0];n&&n.name&&(this.avatarUploadLabel=n.name,this.dbService.uploadAvatar(n).subscribe((function(e){e.id&&(t.avatarId=e.id)})))}},{key:"showToast",value:function(e){this.toastrService.show("success"===e?"Cucu posted!":"Error. Please try again later","success"===e?"Success":"Error",{status:e})}},{key:"handleDateChange",value:function(e){console.log(e)}},{key:"getTimeSlots",value:function(e){var t=[],n=(new Date).getHours(),i=(new Date).getMinutes()>30?1:0;"Today"!==e&&(n=0,i=0);for(var o=n+i;o<24;o++){var a=Math.floor(o)+":";t.push(a+"00",a+"30")}return t}},{key:"elementStatus",value:function(e){return e.valid||!e.dirty?"":"danger"}},{key:"inviteUrl",get:function(){return this.form.get("inviteUrl")}},{key:"topic",get:function(){return this.form.get("topic")}},{key:"userName",get:function(){return this.form.get("userName")}},{key:"language",get:function(){return this.form.get("language")}},{key:"day",get:function(){return this.form.get("day")}},{key:"time",get:function(){return this.form.get("time")}}]),e}()).\u0275fac=function(e){return new(e||V)(s.Qb(a.b),s.Qb(u.c),s.Qb(m),s.Qb(g.H))},V.\u0275cmp=s.Kb({type:V,selectors:[["app-add-cucu"]],viewQuery:function(e,t){var n;1&e&&s.Ec(v,!0),2&e&&s.pc(n=s.fc())&&(t.element=n.first)},decls:53,vars:39,consts:[["accent","primary"],[1,"example-items-col"],[3,"formGroup"],[1,"form-group"],["nbPrefix","","icon","link-outline","pack","eva"],["type","text","nbInput","","fullWidth","","placeholder","Invite Link (Hangouts, Skype or Zoom)",3,"formControl","shape","fieldSize","status"],["class","call-providers-info-box",4,"ngIf"],["nbPrefix","","icon","heart-outline","pack","eva"],["type","text","nbInput","","fullWidth","","placeholder","What's your Cucu about? Yoga, Reading, \u2026","id","topic",3,"formControl","shape","fieldSize","status"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12"],["placeholder","Select Language","fullWidth","","nbTooltip","What language will your CUCU be in?","nbTooltipStatus","basic",3,"formControl","size","shape"],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-7","col-md-12","col-sm-12"],["placeholder","Select Day","fullWidth","","nbTooltip","When is your CUCU taking place?","nbTooltipStatus","basic",3,"formControl","selected","shape","size"],[3,"value"],[1,"col-lg-5","col-md-12","col-sm-12"],["nbPrefix","","icon","clock-outline","pack","eva"],["fullWidth","","nbInput","","type","text","placeholder","Enter time","nbTooltip","At what time will your CUCU start?","nbTooltipStatus","basic",3,"formControl","status","shape","nbAutocomplete","fieldSize"],["element",""],["timeAutocomplete",""],["nbPrefix","","icon","person-outline","pack","eva"],["type","text","nbInput","","placeholder","Your Name","fullWidth","",3,"formControl","shape","status","fieldSize"],["nbButton","","status","primary","fullWidth","","nbTooltip","This pricture will show up next to your CUCU. (Max. 1MB)","nbTooltipStatus","basic",3,"shape","size","click"],["type","file",2,"display","none",3,"accept","change"],["avatarInput",""],["nbButton","","hero","","status","primary","fullWidth","",3,"type","shape","size","click"],[1,"call-providers-info-box"],["href","https://hangouts.google.com","target","_blank"],["href","https://www.skype.com","target","_blank"],["href","https://meet.jit.si","target","_blank"],["href","https://zoom.us/signup","target","_blank"]],template:function(e,t){if(1&e){var n=s.Xb();s.Wb(0,"nb-card",0),s.Wb(1,"nb-card-body",1),s.Wb(2,"form",2),s.Wb(3,"div",3),s.Wb(4,"nb-form-field"),s.Rb(5,"nb-icon",4),s.Rb(6,"input",5),s.Vb(),s.Vb(),s.yc(7,y,22,0,"nb-card",6),s.Wb(8,"div",3),s.Wb(9,"nb-form-field"),s.Rb(10,"nb-icon",7),s.Rb(11,"input",8),s.Vb(),s.Vb(),s.Wb(12,"div",9),s.Wb(13,"div",10),s.Wb(14,"div",3),s.Wb(15,"nb-select",11),s.yc(16,C,2,2,"nb-option",12),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(17,"div",9),s.Wb(18,"div",13),s.Wb(19,"div",3),s.Wb(20,"nb-form-field"),s.Wb(21,"nb-select",14),s.Wb(22,"nb-option",15),s.Ac(23,"Today"),s.Vb(),s.Wb(24,"nb-option",15),s.Ac(25,"Tomorrow"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(26,"div",16),s.Wb(27,"div",3),s.Wb(28,"nb-form-field"),s.Rb(29,"nb-icon",17),s.Rb(30,"input",18,19),s.Wb(32,"nb-autocomplete",null,20),s.yc(34,W,2,2,"nb-option",12),s.hc(35,"async"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(36,"div",9),s.Wb(37,"div",13),s.Wb(38,"div",3),s.Wb(39,"nb-form-field"),s.Rb(40,"nb-icon",21),s.Rb(41,"input",22),s.Vb(),s.Vb(),s.Vb(),s.Wb(42,"div",16),s.Wb(43,"div",3),s.Wb(44,"button",23),s.ec("click",(function(){return s.sc(n),s.qc(47).click()})),s.Ac(45," Upload Picture "),s.Vb(),s.Wb(46,"input",24,25),s.ec("change",(function(e){return t.onAvatarFileChanged(e)})),s.Vb(),s.Wb(48,"p"),s.Ac(49),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(50,"div",3),s.Wb(51,"button",26),s.ec("click",(function(){return t.postCucu()})),s.Ac(52," Post "),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb()}if(2&e){var i=s.qc(33);s.Eb(2),s.mc("formGroup",t.form),s.Eb(4),s.mc("formControl",t.inviteUrl)("shape",t.componentShape)("fieldSize",t.componentSize)("status",t.elementStatus(t.inviteUrl)),s.Eb(1),s.mc("ngIf",t.showCallProvidersInfoBox),s.Eb(4),s.mc("formControl",t.topic)("shape",t.componentShape)("fieldSize",t.componentSize)("status",t.elementStatus(t.topic)),s.Eb(4),s.mc("formControl",t.language)("size",t.componentSize)("shape",t.componentShape),s.Eb(1),s.mc("ngForOf",t.languages),s.Eb(5),s.mc("formControl",t.day)("selected","Today")("shape",t.componentShape)("size",t.componentSize),s.Eb(1),s.mc("value","Today"),s.Eb(2),s.mc("value","Tomorrow"),s.Eb(6),s.mc("formControl",t.time)("status",t.elementStatus(t.time))("shape",t.componentShape)("nbAutocomplete",i)("fieldSize",t.componentSize),s.Eb(4),s.mc("ngForOf",s.ic(35,37,t.filteredTimeOptions$)),s.Eb(7),s.mc("formControl",t.userName)("shape",t.componentShape)("status",t.elementStatus(t.userName))("fieldSize",t.componentSize),s.Eb(3),s.mc("shape",t.componentShape)("size",t.componentSize),s.Eb(2),s.mc("accept","image/x-png, image/jpeg"),s.Eb(3),s.Bc(t.avatarUploadLabel),s.Eb(2),s.mc("type","submit")("shape","rectangle")("size","large")}},directives:[g.g,g.f,a.n,a.i,a.d,g.m,g.o,g.B,g.r,a.a,a.h,a.c,o.m,g.C,g.I,o.l,g.A,g.b,g.a,g.d],pipes:[o.b],styles:[".call-providers-info-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),V);function k(e){return!e||!e.value||e.value.includes("hangouts.google.com")||e.value.includes("join.skype.com")||e.value.includes("meet.jit.si")||e.value.includes("zoom.us")?null:{validInviteUrl:!1}}var w,O=((w=function(){function e(t){_classCallCheck(this,e),this.dbService=t}return _createClass(e,[{key:"ngOnInit",value:function(){this.cucu.avatarId&&this.cucu.avatarId.length>0&&(this.imageUrl="".concat(this.dbService.getImageBaseUrl(),"/").concat(this.cucu.avatarId));var e,t,n=new Date(this.cucu.startDate);this.time=n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),this.day=(e=n,t=new Date,e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()?"Today":"Tomorrow")}},{key:"getLangEmoji",value:function(e){return function(e){return f.find((function(t){return t.short===e})).emoji}(e)}},{key:"isEnabled",value:function(){var e=new Date,t=new Date(this.cucu.startDate),n=new Date(this.cucu.startDate);return n.setMinutes(n.getMinutes()+15),t.toISOString()<e.toISOString()&&e.toISOString()<n.toISOString()}},{key:"getStatus",value:function(){return this.isEnabled()?"primary":"disabled"}},{key:"toCall",value:function(){this.isEnabled()&&window.open(this.cucu.inviteUrl)}}]),e}()).\u0275fac=function(e){return new(e||w)(s.Qb(m))},w.\u0275cmp=s.Kb({type:w,selectors:[["app-cucu-box"]],inputs:{cucu:"cucu"},decls:8,vars:10,consts:[["size","giant",3,"picture","name","title","badgeText","badgeStatus","badgePosition"],["nbButton","",3,"disabled","status","shape","click"]],template:function(e,t){1&e&&(s.Wb(0,"nb-card"),s.Wb(1,"nb-card-header"),s.Rb(2,"nb-user",0),s.Vb(),s.Wb(3,"nb-card-body"),s.Ac(4),s.Vb(),s.Wb(5,"nb-card-footer"),s.Wb(6,"button",1),s.ec("click",(function(){return t.toCall()})),s.Ac(7," Join "),s.Vb(),s.Vb(),s.Vb()),2&e&&(s.Eb(2),s.mc("picture",t.imageUrl)("name",t.cucu.userName)("title",t.day+" at "+t.time)("badgeText",t.cucu.language)("badgeStatus","primary")("badgePosition","bottom right"),s.Eb(2),s.Cc(" ",t.cucu.topic," "),s.Eb(2),s.mc("disabled",!1)("status",t.getStatus())("shape","rectangle"))},directives:[g.g,g.i,g.K,g.f,g.h,g.d],styles:[""]}),w);function T(e,t){1&e&&(s.Wb(0,"p"),s.Ac(1,"No Cucus found :("),s.Vb())}function E(e,t){if(1&e&&(s.Wb(0,"div",14),s.Rb(1,"app-cucu-box",15),s.Vb()),2&e){var n=t.$implicit;s.Eb(1),s.mc("cucu",n)("@simpleFadeAnimation","in")}}function I(e,t){if(1&e){var n=s.Xb();s.Wb(0,"button",16),s.ec("click",(function(){return s.sc(n),s.gc().loadMore()})),s.Ac(1," Load more "),s.Vb()}2&e&&s.mc("shape","rectangle")("size","medium")}var P,_=((P=function(){function e(t,n){_classCallCheck(this,e),this.translate=t,this.dbService=n,this.doWeHaveMore=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"loadMore",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||P)(s.Qb(u.c),s.Qb(m))},P.\u0275cmp=s.Kb({type:P,selectors:[["app-home"]],decls:27,vars:7,consts:[[1,"row"],[1,"col-lg-7","col-md-6"],[1,"hero-section"],[1,"vdo-section"],["href","https://www.youtube.com/watch?v=p29dKpHnPjQ","target","_blank"],["src","./assets/images/video-icon.svg","alt","Play button"],[1,"col-lg-5","col-md-6"],[1,"no-cucus-div"],[4,"ngIf"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"ws-s"],[1,"col-md-12","load-more-div"],["nbButton","","status","primary",3,"shape","size","click",4,"ngIf"],[1,"ws-m"],[1,"col-md-4"],[3,"cucu"],["nbButton","","status","primary",3,"shape","size","click"]],template:function(e,t){1&e&&(s.Wb(0,"div",0),s.Wb(1,"div",1),s.Wb(2,"div",2),s.Wb(3,"h1"),s.Ac(4,"Sconfiggi la noia con CUCUit!"),s.Vb(),s.Wb(5,"p"),s.Ac(6," Conosci persone sempre nuove e condividi idee sull\u2019argomento che preferisci. Chiuditi in casa. Apri la mente. Esci dagli schemi. "),s.Vb(),s.Wb(7,"div",3),s.Wb(8,"a",4),s.Rb(9,"img",5),s.Vb(),s.Wb(10,"span"),s.Wb(11,"a",4),s.Ac(12,"Watch our intro video"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(13,"div",6),s.Rb(14,"app-add-cucu"),s.Vb(),s.Vb(),s.Rb(15,"hr"),s.Wb(16,"div",0),s.Wb(17,"div",7),s.yc(18,T,2,0,"p",8),s.hc(19,"async"),s.Vb(),s.yc(20,E,2,2,"div",9),s.hc(21,"async"),s.Vb(),s.Rb(22,"div",10),s.Wb(23,"div",0),s.Wb(24,"div",11),s.yc(25,I,2,2,"button",12),s.Vb(),s.Vb(),s.Rb(26,"div",13)),2&e&&(s.Eb(18),s.mc("ngIf",s.ic(19,3,t.dbService.cucus).length<1),s.Eb(2),s.mc("ngForOf",s.ic(21,5,t.dbService.cucus)),s.Eb(5),s.mc("ngIf",t.doWeHaveMore))},directives:[S,o.m,o.l,O,g.d],pipes:[o.b],styles:[".hero-section[_ngcontent-%COMP%]{margin:18% 15% 5% 10%}.hero-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:55px;line-height:1}.hero-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:20px 0}.no-cucus-div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;text-align:center}@media (max-width:991px){.hero-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:50px}}.vdo-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer;width:80px}.vdo-section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:20px;font-size:14px;font-weight:500}.vdo-section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000}.load-more-div[_ngcontent-%COMP%]{text-align:center}"],data:{animation:[Object(r.j)("simpleFadeAnimation",[Object(r.g)("in",Object(r.h)({opacity:1})),Object(r.i)(":enter",[Object(r.h)({opacity:0}),Object(r.e)(600)]),Object(r.i)(":leave",Object(r.e)(600,Object(r.h)({opacity:0})))])]}}),P),M=n("yXpV"),A=n("NICT");n.d(t,"HomeModule",(function(){return z}));var U,x=[{path:"",component:_}],z=((U=function e(){_classCallCheck(this,e)}).\u0275mod=s.Ob({type:U}),U.\u0275inj=s.Nb({factory:function(e){return new(e||U)},imports:[[o.c,a.e,u.b,c.g.forChild(x),M.a,A.a,g.e]]}),U)}}]);